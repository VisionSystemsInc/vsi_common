=============================
J.U.S.T. Install CI Functions
=============================

.. default-domain:: bash

.. file:: just_install_functions.bsh

Install plugin for just. Installation routines are designed to be installed to isolated standalone locations, for example ``/your/path/python-3.7.9``.

.. envvar:: JUST_INSTALL_ACTIVATE_BASENAME

File basename for utility activation. Users may source anactivation file to create useful environment variables and add the utility to $PATH.

.. function:: cmake-install

Install CMake.

:Arguments: * [``--dir {dir}``] - CMake install directory
            * [``--version {version}``] - CMake version for install (default= ``${CMAKE_VERSION:-3.16.3}``)

:Output: * cmake_exe - CMake executable
         * cmake_version - CMake version
         * cmake_extra_args - number of arguments consumed
         * cmake_activate - Bash file to activate cmake environment


.. function:: conda-install

Install miniconda

:Arguments: * [``--dir {dir}``] - conda install directory
            * [``--version {version}``] - conda version for install (default= ``${CONDA_VERSION:-latest}``)
            * [``--installer {INSTALLER}``] - Conda installer

:Output: * conda_exe - conda executable
         * conda_version - conda version
         * conda_extra_args - number of arguments consumed
         * conda_activate - bash file to make conda available

.. function:: conda-python-install

Install python via conda.

The conda executable is selected as per the following preference order:
* ``--conda``
* temporary conda installed from ``conda-installer``
* if ``--download``: temporary miniconda3 download
* else: system level conda if available, then temporary miniconda3 download

:Arguments: * [``--dir {dir}``] - Python install directory
            * [``--version {version}``] - Python version for install (default= ``${PYTHON_VERSION:-3.6.9}``)
            * [``--conda {CONDA}``] - Conda executable
            * [``--conda-installer {INSTALLER}``] - Conda installer
            * [``--download``] - Download miniconda
            * [``--package {package}``] - An additional package to be installed, may be called multiple times

:Output: * python_exe - Python executable
         * python_version - Python version
         * conda_python_extra_args - number of arguments consumed
         * python_activate - Bash file to activate python environment

.. function:: pipenv-install

Install a virtualenv containing pipenv.

:Arguments: * [``--dir {dir}``] - Pipenv install directory
            * [``--version {version}``] - Pipenv version for install (default= ``${RECIPE_PIPENV_VERSION:-${PIPENV_VERSION:-2020.11.15}}``)
            * [``--python {PYTHON}``] - Python executable (default=(python3|python|python2))
            * [``--python-activate {script}``] - Optional python activation script, for example as created by :func:`conda-python-install`
            * [``--virtualenv-pyz {file}``] - Optional virtualenv zipapp file (default= ``${RECIPE_VIRTUALENV_PYZ:-${VIRTUALENV_PYZ:-}}``)
            * [``--virtualenv-version {version}``] - Optional viertualenv version (default= ``${RECIPE_VIRTUALENV_VERSION:-${VIRTUALENV_VERSION:-20.4.5}}``)

:Output: * pipenv_exe - Pipenv executable
         * pipenv_version - Pipenv version
         * pipenv_extra_args - number of arguments consumed
         * pipenv_activate - Bash file to activate pipenv environment

.. command:: install_cmake

Install CMake

.. seealso::

  :func:`cmake-install`

.. command:: install_conda

Install miniconda

.. seealso::

  :func:`conda-install`

.. command:: install_conda-python

Install python via conda

.. seealso::

  :func:`conda-python-install`

.. command:: install_pipenv

Install a virtualenv containing pipenv

.. seealso::

  :func:`pipenv-install`

