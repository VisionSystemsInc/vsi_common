<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>New J.U.S.T. &mdash; VSI Common 0.2.2+1dev documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Updating a just environment" href="just_diff.auto.html" />
    <link rel="prev" title="J.U.S.T. Wrap" href="just_wrap.auto.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            VSI Common
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">J.U.S.T. Useful Simple Tasking</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="installation.html">J.U.S.T. Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart_user.html">J.U.S.T. Quickstart Guide for Users</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html">Getting started developing with <code class="docutils literal notranslate"><span class="pre">just</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="just.auto.html">J.U.S.T.</a></li>
<li class="toctree-l2"><a class="reference internal" href="files.html">J.U.S.T. Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="just-tab.auto.html">Tab completion</a></li>
<li class="toctree-l2"><a class="reference internal" href="just_common.auto.html">Just Common Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="just_env.auto.html">Environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="just_functions.auto.html">Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="just_version.auto.html">Just Version</a></li>
<li class="toctree-l2"><a class="reference internal" href="just_wrap.auto.html">J.U.S.T. Wrap</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">New J.U.S.T.</a></li>
<li class="toctree-l2"><a class="reference internal" href="just_diff.auto.html">Updating a just environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="plugins/index.html">J.U.S.T. Plugins</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../linux/index.html">Linux Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../windows/index.html">Windows Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tests/index.html">Unit Tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python/modules.html">vsi</a></li>
<li class="toctree-l1"><a class="reference internal" href="../docker/recipes/get-pipenv.auto.html">Get Pipenv</a></li>
<li class="toctree-l1"><a class="reference internal" href="../docker/recipes/index.html">Docker recipes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../style.html">Contributing Style Guide</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">VSI Common</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">J.U.S.T. Useful Simple Tasking</a></li>
      <li class="breadcrumb-item active">New J.U.S.T.</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/just/new_just.auto.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="new-j-u-s-t">
<h1>New J.U.S.T.<a class="headerlink" href="#new-j-u-s-t" title="Permalink to this heading"></a></h1>
<dl class="bash file">
<dt class="sig sig-object bash" id="file-new_just">
<span class="sig-name descname"><span class="pre">new_just</span></span><a class="headerlink" href="#file-new_just" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<p>Create a new just project</p>
<p>There are many moving pieces to set up a working just project and use
all the features. Just getting started is hard, without knowing where to
start. This script will create all the files necessary to have a new
docker compose based just project up and running.</p>
<p class="rubric">Usage</p>
<p>By default, <a class="reference internal" href="#file-new_just"><code class="xref bash bash-file docutils literal notranslate"><span class="pre">new_just</span></code></a> will prompt the user for questions on the initial
setup parameters. Default values are supplied for all questions, and enter
can be pressed to accept all the defaults. All of the questions can be set
using environment variables, making them scriptable.</p>
<p>After <a class="reference internal" href="#file-new_just"><code class="xref bash bash-file docutils literal notranslate"><span class="pre">new_just</span></code></a> is called, a few git commands need to be called. This is not
done for you, in case it will break your existing repository. These
commands are printed out on stdout, while everything else is printed on
stderr, making them scriptable.</p>
<p>If any of the files written to exist, they are not overwritten, and a warning
message is printed out.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#env-new_just new_just PROJECT_DIR"><code class="xref bash bash-env docutils literal notranslate"><span class="pre">new_just</span> <span class="pre">new_just</span> <span class="pre">PROJECT_DIR</span></code></a>, <a class="reference internal" href="#env-new_just new_just PROJECT_NAME"><code class="xref bash bash-env docutils literal notranslate"><span class="pre">new_just</span> <span class="pre">new_just</span> <span class="pre">PROJECT_NAME</span></code></a>, <a class="reference internal" href="#env-new_just new_just PROJECT_PREFIX"><code class="xref bash bash-env docutils literal notranslate"><span class="pre">new_just</span> <span class="pre">new_just</span> <span class="pre">PROJECT_PREFIX</span></code></a>
<a class="reference internal" href="#env-new_just new_just REPO_NAME"><code class="xref bash bash-env docutils literal notranslate"><span class="pre">new_just</span> <span class="pre">new_just</span> <span class="pre">REPO_NAME</span></code></a>, <a class="reference internal" href="#env-new_just new_just JUSTFILE"><code class="xref bash bash-env docutils literal notranslate"><span class="pre">new_just</span> <span class="pre">new_just</span> <span class="pre">JUSTFILE</span></code></a>, <a class="reference internal" href="#env-new_just new_just SETUPFILE"><code class="xref bash bash-env docutils literal notranslate"><span class="pre">new_just</span> <span class="pre">new_just</span> <span class="pre">SETUPFILE</span></code></a>
<a class="reference internal" href="#env-new_just new_just VSI_DIR"><code class="xref bash bash-env docutils literal notranslate"><span class="pre">new_just</span> <span class="pre">new_just</span> <span class="pre">VSI_DIR</span></code></a></p>
</div>
<dl class="bash function">
<dt class="sig sig-object bash" id="function-new_just docker_add_quote_escape">
<span class="sig-name descname"><span class="pre">docker_add_quote_escape</span></span><a class="headerlink" href="#function-new_just docker_add_quote_escape" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<p>Escapes arbitrary filename for <code class="docutils literal notranslate"><span class="pre">Dockerfile</span></code> <code class="docutils literal notranslate"><span class="pre">ADD</span> <span class="pre">[&quot;filename&quot;,</span> <span class="pre">&quot;dest&quot;]</span></code> syntax, not including outer <code class="docutils literal notranslate"><span class="pre">&quot;</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Arguments<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">$1</span></code> - Filename to be escaped</p>
</dd>
</dl>
<dl class="bash function">
<dt class="sig sig-object bash" id="function-new_just docker_env_quote_escape">
<span class="sig-name descname"><span class="pre">docker_env_quote_escape</span></span><a class="headerlink" href="#function-new_just docker_env_quote_escape" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<p>Escapes arbitrary value for <code class="docutils literal notranslate"><span class="pre">Dockerfile</span></code> <code class="docutils literal notranslate"><span class="pre">ENV</span> <span class="pre">var=&quot;value&quot;</span></code> syntax, not including outer <code class="docutils literal notranslate"><span class="pre">&quot;</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Arguments<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">$1</span></code> - Value to be escaped</p>
</dd>
</dl>
<dl class="bash function">
<dt class="sig sig-object bash" id="function-new_just new_just">
<span class="sig-name descname"><span class="pre">new_just</span></span><a class="headerlink" href="#function-new_just new_just" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<p>The main new_just function. The script to be in a function, or else streaming <code class="docutils literal notranslate"><span class="pre">curl</span></code> to bash won’t work.</p>
<dl class="bash env">
<dt class="sig sig-object bash" id="env-new_just new_just PROJECT_DIR">
<span class="sig-name descname"><span class="pre">PROJECT_DIR</span></span><a class="headerlink" href="#env-new_just new_just PROJECT_DIR" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<p>The project directory is typically the root directory of the main git
repository. This is where all the just files will be stored by default.</p>
<p>The value can be customized when prompted by <a class="reference internal" href="#file-new_just"><code class="xref bash bash-file docutils literal notranslate"><span class="pre">new_just</span></code></a>. The default value
is the current working directory. The question can be skipped by setting
the environment variable <a class="reference internal" href="#env-new_just new_just PROJECT_DIR"><code class="xref bash bash-env docutils literal notranslate"><span class="pre">PROJECT_DIR</span></code></a> to the desired value.</p>
<dl class="bash env">
<dt class="sig sig-object bash" id="env-new_just new_just PROJECT_NAME">
<span class="sig-name descname"><span class="pre">PROJECT_NAME</span></span><a class="headerlink" href="#env-new_just new_just PROJECT_NAME" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<p>The <a class="reference internal" href="#env-new_just new_just PROJECT_NAME"><code class="xref bash bash-env docutils literal notranslate"><span class="pre">PROJECT_NAME</span></code></a> is used to set the project environment file name used by
<a class="reference internal" href="just_functions.auto.html#function-just_functions.bsh source_environment_files"><code class="xref bash bash-func docutils literal notranslate"><span class="pre">just_functions.bsh</span> <span class="pre">source_environment_files</span></code></a>. Specifically: <code class="docutils literal notranslate"><span class="pre">${PROJECT_DIR}/${PROJECT_NAME}.env</span></code>
<a class="reference internal" href="#env-new_just new_just PROJECT_NAME"><code class="xref bash bash-env docutils literal notranslate"><span class="pre">PROJECT_NAME</span></code></a> is also used for for determining other default values.</p>
<p>The value can be customized when prompted by <a class="reference internal" href="#file-new_just"><code class="xref bash bash-file docutils literal notranslate"><span class="pre">new_just</span></code></a>. The default value
is basename of the <a class="reference internal" href="#env-new_just new_just PROJECT_DIR"><code class="xref bash bash-env docutils literal notranslate"><span class="pre">PROJECT_DIR</span></code></a>. The question can be skipped by setting the
environment variable <a class="reference internal" href="#env-new_just new_just PROJECT_NAME"><code class="xref bash bash-env docutils literal notranslate"><span class="pre">PROJECT_NAME</span></code></a> to the desired value.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="just_functions.auto.html#function-just_functions.bsh source_environment_files"><code class="xref bash bash-func docutils literal notranslate"><span class="pre">just_functions.bsh</span> <span class="pre">source_environment_files</span></code></a></p>
</div>
<dl class="bash env">
<dt class="sig sig-object bash" id="env-new_just new_just PROJECT_PREFIX">
<span class="sig-name descname"><span class="pre">PROJECT_PREFIX</span></span><a class="headerlink" href="#env-new_just new_just PROJECT_PREFIX" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<p>The prefix of environment variables for this project</p>
<p>Used to set the value of <span class="target" id="index-0"></span><a class="reference internal" href="just_functions.auto.html#envvar-JUST_PROJECT_PREFIX"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">JUST_PROJECT_PREFIX</span></code></a>. Must contain only valid bash
variable-name characters: <code class="docutils literal notranslate"><span class="pre">[A-Z0-9_]+</span></code></p>
<p>Does not need the trailing _ included, this will always be added when it is
used.</p>
<p>The value can be customized when prompted by new_just. The default value is
uppercase of the <a class="reference internal" href="#env-new_just new_just PROJECT_NAME"><code class="xref bash bash-env docutils literal notranslate"><span class="pre">PROJECT_NAME</span></code></a>. The question can be skipped by setting the
environment variable <a class="reference internal" href="#env-new_just new_just PROJECT_PREFIX"><code class="xref bash bash-env docutils literal notranslate"><span class="pre">PROJECT_PREFIX</span></code></a> to the desired value.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><span class="target" id="index-1"></span><a class="reference internal" href="just_functions.auto.html#envvar-JUST_PROJECT_PREFIX"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">JUST_PROJECT_PREFIX</span></code></a></p>
</div>
<dl class="bash env">
<dt class="sig sig-object bash" id="env-new_just new_just JUSTFILE">
<span class="sig-name descname"><span class="pre">JUSTFILE</span></span><a class="headerlink" href="#env-new_just new_just JUSTFILE" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<p>Name of the justfile used</p>
<p>The default just file in just is “Justfile”. If this is changed, the only
way to inform just of this is by setting it in the <a class="reference internal" href="#env-new_just new_just SETUPFILE"><code class="xref bash bash-env docutils literal notranslate"><span class="pre">SETUPFILE</span></code></a>. This will be
added to the <a class="reference internal" href="#env-new_just new_just SETUPFILE"><code class="xref bash bash-env docutils literal notranslate"><span class="pre">SETUPFILE</span></code></a> by <a class="reference internal" href="#file-new_just"><code class="xref bash bash-file docutils literal notranslate"><span class="pre">new_just</span></code></a> if anything other than the default is
used.</p>
<p>The value can be customized when prompted by <a class="reference internal" href="#file-new_just"><code class="xref bash bash-file docutils literal notranslate"><span class="pre">new_just</span></code></a>. The default value
is <code class="docutils literal notranslate"><span class="pre">Justfile</span></code>. The question can be skipped by setting the environment variable
<a class="reference internal" href="#env-new_just new_just JUSTFILE"><code class="xref bash bash-env docutils literal notranslate"><span class="pre">JUSTFILE</span></code></a> to the desired value.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#env-new_just new_just SETUPFILE"><code class="xref bash bash-env docutils literal notranslate"><span class="pre">SETUPFILE</span></code></a>, just/Justfile</p>
</div>
<dl class="bash env">
<dt class="sig sig-object bash" id="env-new_just new_just USE_VSI_COMMON">
<span class="sig-name descname"><span class="pre">USE_VSI_COMMON</span></span><a class="headerlink" href="#env-new_just new_just USE_VSI_COMMON" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<p>Flag to include vsi_common</p>
<p>vsi_common can either be included as a submodule, in which case setup.env
is needed, or the just executable needs to be installed and vsi_common is
not needed.</p>
<dl class="bash env">
<dt class="sig sig-object bash" id="env-new_just new_just SETUPFILE">
<span class="sig-name descname"><span class="pre">SETUPFILE</span></span><a class="headerlink" href="#env-new_just new_just SETUPFILE" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<p>Name of the setup file sourced to setup just environment</p>
<p>The setup file is used to make the minimal necessary changes to the
environment so that just works. This includes adding paths and setting a
few environment variables. This is meant to be as unobtrusive as possible.</p>
<p>This file needs to be sourced every time a new terminal session is opened.
The only time the setup script is not needed is when using <strong class="command">juste</strong>.</p>
<p>The value can be customized when prompted by <a class="reference internal" href="#file-new_just"><code class="xref bash bash-file docutils literal notranslate"><span class="pre">new_just</span></code></a>. The default value is
<code class="docutils literal notranslate"><span class="pre">setup.env</span></code>. The question can be skipped by setting the environment variable
<a class="reference internal" href="#env-new_just new_just SETUPFILE"><code class="xref bash bash-env docutils literal notranslate"><span class="pre">SETUPFILE</span></code></a> to the desired value.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><strong class="command">juste</strong></p>
</div>
<dl class="bash env">
<dt class="sig sig-object bash" id="env-new_just new_just VSI_DIR">
<span class="sig-name descname"><span class="pre">VSI_DIR</span></span><a class="headerlink" href="#env-new_just new_just VSI_DIR" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<p>Location of the vsi_common submodule</p>
<p>The vsi_common repository is necessary for virtually all of the just
capabilities. The correct way to deal with this is to add vsi_common as a
submodule for your main project. This tells just were this submodule is
located.</p>
<p>The value can be customized when prompted by <a class="reference internal" href="#file-new_just"><code class="xref bash bash-file docutils literal notranslate"><span class="pre">new_just</span></code></a>. The default value is
external/vsi_common. The question can be skipped by setting the environment
variable <a class="reference internal" href="#env-new_just new_just VSI_DIR"><code class="xref bash bash-env docutils literal notranslate"><span class="pre">VSI_DIR</span></code></a> to the desired value.</p>
<p class="rubric">Docker Stuff</p>
<dl class="bash env">
<dt class="sig sig-object bash" id="env-new_just new_just USE_DOCKER">
<span class="sig-name descname"><span class="pre">USE_DOCKER</span></span><a class="headerlink" href="#env-new_just new_just USE_DOCKER" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<p>Flag to turn on all the docker features</p>
<dl class="bash env">
<dt class="sig sig-object bash" id="env-new_just new_just USE_PIPENV">
<span class="sig-name descname"><span class="pre">USE_PIPENV</span></span><a class="headerlink" href="#env-new_just new_just USE_PIPENV" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<p>Flag to turn on setting up pipenv</p>
<dl class="bash env">
<dt class="sig sig-object bash" id="env-new_just new_just APP_NAME">
<span class="sig-name descname"><span class="pre">APP_NAME</span></span><a class="headerlink" href="#env-new_just new_just APP_NAME" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<p>The name of the test app generated. Used for the name of the first service populated for you.</p>
<dl class="bash env">
<dt class="sig sig-object bash" id="env-new_just new_just REPO_NAME">
<span class="sig-name descname"><span class="pre">REPO_NAME</span></span><a class="headerlink" href="#env-new_just new_just REPO_NAME" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<p>When docker images are built, they need to be named, or else the only way to
access them is inconveniently though sha256 checksums.</p>
<p>The <a class="reference internal" href="#env-new_just new_just REPO_NAME"><code class="xref bash bash-env docutils literal notranslate"><span class="pre">REPO_NAME</span></code></a> should be an untagged docker repository name. Tag names will
be added for each service. Docker image names must match the regex
<code class="docutils literal notranslate"><span class="pre">[a-zA-Z0-9][a-zA-Z0-9_.-]*</span></code> or else docker will error</p>
<p>The value can be customized when prompted by <a class="reference internal" href="#file-new_just"><code class="xref bash bash-file docutils literal notranslate"><span class="pre">new_just</span></code></a>. The default value is
lowercase of the <a class="reference internal" href="#env-new_just new_just PROJECT_NAME"><code class="xref bash bash-env docutils literal notranslate"><span class="pre">PROJECT_NAME</span></code></a>. The question can be skipped by setting the
environment variable <a class="reference internal" href="#env-new_just new_just REPO_NAME"><code class="xref bash bash-env docutils literal notranslate"><span class="pre">REPO_NAME</span></code></a> to the desired value.</p>
<dl class="bash env">
<dt class="sig sig-object bash" id="env-new_just new_just USE_TUTORIAL">
<span class="sig-name descname"><span class="pre">USE_TUTORIAL</span></span><a class="headerlink" href="#env-new_just new_just USE_TUTORIAL" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<p>Flag to turn on tutorial comments</p>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="just_wrap.auto.html" class="btn btn-neutral float-left" title="J.U.S.T. Wrap" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="just_diff.auto.html" class="btn btn-neutral float-right" title="Updating a just environment" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, Vision Systems, Inc.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>