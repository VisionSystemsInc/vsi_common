

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>J.U.S.T. Git Functions &mdash; VSI Common 0.2.2+1dev documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="J.U.S.T. Makeself Functions" href="just_makeself_functions.auto.html" />
    <link rel="prev" title="J.U.S.T. Default Run Functions" href="just_default_run_functions.auto.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> VSI Common
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">J.U.S.T. Useful Simple Tasking</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../installation.html">J.U.S.T. Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../quickstart_user.html">J.U.S.T. Quickstart Guide for Users</a></li>
<li class="toctree-l2"><a class="reference internal" href="../quickstart.html">Getting started developing with <code class="docutils literal notranslate"><span class="pre">just</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../just.auto.html">J.U.S.T.</a></li>
<li class="toctree-l2"><a class="reference internal" href="../files.html">J.U.S.T. Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../just-tab.auto.html">Tab completion</a></li>
<li class="toctree-l2"><a class="reference internal" href="../just_common.auto.html">Just Common Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../just_env.auto.html">Environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../just_functions.auto.html">Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../just_version.auto.html">Just Version</a></li>
<li class="toctree-l2"><a class="reference internal" href="../just_wrap.auto.html">J.U.S.T. Wrap</a></li>
<li class="toctree-l2"><a class="reference internal" href="../new_just.auto.html">New J.U.S.T.</a></li>
<li class="toctree-l2"><a class="reference internal" href="../just_diff.auto.html">Updating a just environment</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">J.U.S.T. Plugins</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="docker/index.html">J.U.S.T. Docker Plugin</a></li>
<li class="toctree-l3"><a class="reference internal" href="singularity/index.html">J.U.S.T. Singularity Plugin</a></li>
<li class="toctree-l3"><a class="reference internal" href="container_functions.auto.html">Container Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="just_bashcov_functions.auto.html">J.U.S.T. Bash Coverage Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="just_default_run_functions.auto.html">J.U.S.T. Default Run Functions</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">J.U.S.T. Git Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="just_makeself_functions.auto.html">J.U.S.T. Makeself Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="just_robodoc_functions.auto.html">J.U.S.T. Robodoc Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="just_sphinx_functions.auto.html">J.U.S.T. Sphinx Docs Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="just_test_functions.auto.html">J.U.S.T. Test Functions</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../linux/index.html">Linux Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../windows/index.html">Windows Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tests/index.html">Unit Tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python/modules.html">vsi</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../docker/recipes/get-pipenv.auto.html">Get Pipenv</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../docker/recipes/index.html">Docker recipes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../style.html">Contributing Style Guide</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">VSI Common</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">J.U.S.T. Useful Simple Tasking</a> &raquo;</li>
        
          <li><a href="index.html">J.U.S.T. Plugins</a> &raquo;</li>
        
      <li>J.U.S.T. Git Functions</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/just/plugins/just_git_functions.auto.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="j-u-s-t-git-functions">
<h1>J.U.S.T. Git Functions<a class="headerlink" href="#j-u-s-t-git-functions" title="Permalink to this headline">¶</a></h1>
<dl class="file">
<dt id="file-just_git_functions.bsh">
<code class="sig-name descname">just_git_functions.bsh</code><a class="headerlink" href="#file-just_git_functions.bsh" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>git plugin for just</p>
<dl class="envvar">
<dt id="envvar-GIT">
<code class="sig-name descname">GIT</code><a class="headerlink" href="#envvar-GIT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Name/path of git executable</p>
<p>Instead of hard-coding “git” everywhere, use the variable <span class="target" id="index-0"></span><a class="reference internal" href="../../linux/git_mirror.auto.html#envvar-GIT"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">GIT</span></code></a> so that when the need comes, it is easier to switch which executable gets called. Set to empty string to have any calls to git skipped.</p>
<p>All <a class="reference internal" href="#function-just_git_functions.bsh git_defaultify"><code class="xref bash bash-func docutils literal notranslate"><span class="pre">git_defaultify</span></code></a> targets will be skipped if the value of <span class="target" id="index-1"></span><a class="reference internal" href="../../linux/git_mirror.auto.html#envvar-GIT"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">GIT</span></code></a> is not found or empty.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When using the GIT env variable in this file, do not surround it with quotes as you normally would. Although this prevents using a path to <code class="docutils literal notranslate"><span class="pre">git</span></code> with a space in it, in exchange, it is possible to enable a dry-run-ish capability if GIT is set to ‘echo git’.</p>
</div>
<dl class="function">
<dt id="function-just_git_functions.bsh submodule-helper-list">
<code class="sig-name descname">submodule-helper-list</code><a class="headerlink" href="#function-just_git_functions.bsh submodule-helper-list" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>“git submodule–helper list” bash port</p>
<p>Reproduces what git submodule-helper-list does. Not all versions of git
are modern enough to have this feature. Currently, the first three columns
of information and –prefix are not reproduced because they are not needed.</p>
<dl class="field-list">
<dt class="field-odd">Arguments</dt>
<dd class="field-odd"><p>[<code class="docutils literal notranslate"><span class="pre">$1...</span></code>] - Glob expressions to be matched, just like ‘<cite>git-submodule–helper</cite>’</p>
</dd>
<dt class="field-even">Output</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">submodule_names</span></code> - array of submodule names (matched if filters supplied)</p>
<p><code class="docutils literal notranslate"><span class="pre">submodule_paths</span></code> - corresponding array of submodule paths</p>
</dd>
</dl>
<dl class="function">
<dt id="function-just_git_functions.bsh _checkout_git_submodule">
<code class="sig-name descname">_checkout_git_submodule</code><a class="headerlink" href="#function-just_git_functions.bsh _checkout_git_submodule" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Helper function for <a class="reference internal" href="#function-just_git_functions.bsh safe_git_submodule_update"><code class="xref bash bash-func docutils literal notranslate"><span class="pre">safe_git_submodule_update</span></code></a></p>
<dl class="field-list">
<dt class="field-odd">Arguments</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">$1</span></code> - Submodule name</p>
<p><code class="docutils literal notranslate"><span class="pre">$2</span></code> - Submodule path (relative)</p>
<p><code class="docutils literal notranslate"><span class="pre">$3</span></code> - Message to print out if submodule update failed</p>
</dd>
<dt class="field-even">Output</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">presskey</span></code> - set variable presskey on failure</p>
</dd>
</dl>
<dl class="function">
<dt id="function-just_git_functions.bsh safe_git_submodule_update">
<code class="sig-name descname">safe_git_submodule_update</code><a class="headerlink" href="#function-just_git_functions.bsh safe_git_submodule_update" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Update git submodules in a smart way</p>
<p>git submodules are already confusing enough to work with. When a project
gets big and complicated, and add to that the potential of losing changes
that have already been committed, the default behavior of submodules is
enough to have anyone committed!</p>
<p>A git submodule update should update a submodule <em>if and only if</em> it is a
<strong>ff-only merge</strong>, and the submodule is clean (enough). Also, non-conflicting
unstaged changes are also ok too.</p>
<p class="rubric">Bugs</p>
<p>If the committer of the main repository changes submodules in a non-fast
forward way, this would confuse <a class="reference internal" href="#function-just_git_functions.bsh safe_git_submodule_update"><code class="xref bash bash-func docutils literal notranslate"><span class="pre">safe_git_submodule_update</span></code></a> because that isn’t
very smart.
Update: It will at least tell you which repositories are behind now.</p>
<dl class="field-list simple">
<dt class="field-odd">Arguments</dt>
<dd class="field-odd"><p>[<code class="docutils literal notranslate"><span class="pre">$1..</span></code>] - Specify submodule paths to update. None defaults to all</p>
</dd>
<dt class="field-even">Parameters</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">$show_summary_message</span></code> - For internal use. Disables error summary messages</p>
</dd>
</dl>
<dl class="function">
<dt id="function-just_git_functions.bsh git_reattach_heads">
<code class="sig-name descname">git_reattach_heads</code><a class="headerlink" href="#function-just_git_functions.bsh git_reattach_heads" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Reattach detached heads in submodules.</p>
<p>Search recursively in the current working directory for all submodules with detached heads. For each, look through all named branches (in the form of refs/heads/branch_name) for one with a SHA that matches that of the detached head (if more than one, the first one is used). If no match found, i.e., empty string, then branch is left detached.</p>
<dl class="function">
<dt id="function-just_git_functions.bsh git_defaultify">
<code class="sig-name descname">git_defaultify</code><a class="headerlink" href="#function-just_git_functions.bsh git_defaultify" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Git plugin for just</p>
<dl class="command">
<dt id="command-just_git_functions.bsh git_defaultify git_submodule-update">
<code class="sig-prename descclassname">just git submodule-update</code><a class="headerlink" href="#command-just_git_functions.bsh git_defaultify git_submodule-update" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">JUST_GIT_UPSTREAM</span></code> - The submodule remote name used. When <a class="reference internal" href="#command-just_git_functions.bsh git_defaultify git_submodule-update"><code class="xref bash bash-cmd docutils literal notranslate"><span class="pre">git_submodule-update</span></code></a> syncs, it will use this remote. Default: <code class="docutils literal notranslate"><span class="pre">just_upstream</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">JUST_GIT_USE_REMOTE</span></code> - The submodule remote name used for fetching the new commits. Useful if you have your own set of remotes you want to use. Default: <code class="docutils literal notranslate"><span class="pre">${JUST_GIT_UPSTREAM}</span></code></p></li>
</ul>
</dd>
</dl>
<p>Recursively updates all submodules in a ff-only manner. Also reattaches heads if possible.</p>
<p>Sets <code class="docutils literal notranslate"><span class="pre">JUST_GIT_SUBMODULE_SYNCED</span></code> to <code class="docutils literal notranslate"><span class="pre">1</span></code> on the first run so that subsequent calls are skipped. If you have reason to call it multiple times, you can reset <code class="docutils literal notranslate"><span class="pre">JUST_GIT_SUBMODULE_SYNCED</span></code>.</p>
<dl class="command">
<dt id="command-just_git_functions.bsh git_defaultify git_make-submodules-relative">
<code class="sig-prename descclassname">just git make-submodules-relative</code><a class="headerlink" href="#command-just_git_functions.bsh git_defaultify git_make-submodules-relative" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Recursively update all submodules to have relative paths.</p>
<p>Reset the paths in git submodules to be relative paths (relative to the $(pwd)) rather than absolute paths. This path is specified in the .git file stored in the submodule’s root directory (which is how submodules are managed by git). Relative paths are now the default in git; however, there have been versions where either by design or bug, this path was absolute. The relative path of the submodule is computed using one of: a version of realpath that supports the –relative-to flag, python or perl. If none of these programs are available, the update fails.</p>
<dl class="field-list simple">
<dt class="field-odd">Uses</dt>
<dd class="field-odd"><p>realpath with the –relative-to flag, python or perl.</p>
</dd>
</dl>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="just_makeself_functions.auto.html" class="btn btn-neutral float-right" title="J.U.S.T. Makeself Functions" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="just_default_run_functions.auto.html" class="btn btn-neutral float-left" title="J.U.S.T. Default Run Functions" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Vision Systems, Inc

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>